<div *ngIf="!showNewInsightForm; else insightForm" class="app-project-insights">
    <div class="project-insights-actions">
        <a
            mat-raised-button
            color="warn"
            class="app-insight-list-new-project"
            (click)="showNewInsightForm=true"
            aria-label="Create insight"
            >New Insight</a
        >
    </div>

    <entity-list
        entityName="insight"
        [entityService]="insightService"
        [entityTypeFilters]="insightTypeFilters"
        entityTypeFilterGroup="insightType"
        [querySource]="{ projectId: project._id }"
        previewType="list"
        (entityClick)="onEntityClick($event)"
    ></entity-list>
</div>

<ng-template #insightForm>
    <insight-new (newInsight)="onNewInsight($event)" (close)="showNewInsightForm=false"></insight-new>
</ng-template>
