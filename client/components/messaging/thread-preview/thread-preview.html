<!-- thread-preview is displayed within a mat-list-item -->
<div class="app-thread" *ngIf="thread">
    <user-avatar class="app-thread-header-avatar" [user]="thread.createdBy" [size]="avatarSize"></user-avatar>
    <div class="app-thread-header-metadata">
            <div class="app-thread-header-metadata-line">
                <span class="app-thread-header-title">{{ thread.title }}</span>
                <span class="app-thread-header-time" matTooltip="{{ (thread.updatedAt || thread.createdAt) | dateAndTime }}" [matTooltipPosition]="tooltipPosition">{{ (thread.updatedAt || thread.createdAt) | date: 'shortTime' }}</span>
            </div>
            <span class="app-thread-header-metadata-line">
                <span class="app-thread-header-subtitle">
                    {{ excerpt }}
                </span>
            </span>
    </div>
    <div class="app-thread-header-open-thread">
        <button mat-raised-button class="app-button app-button-landing thread-button" (click)="showThread()">Open thread</button>
    </div>
    <div class="app-thread-header-actions">
        <div *ngIf="showThreadActions">
            <a mat-icon-button [matMenuTriggerFor]="moreActionsMenu" matTooltip="More actions" [matTooltipPosition]="tooltipPosition" aria-label="More actions">
                <mat-icon aria-label="Icon of three horizontal dots">more_horiz</mat-icon>
            </a>
            <mat-menu #moreActionsMenu="matMenu" xPosition="before" [overlapTrigger]="false">
                <!-- TODO Delete thread should only be visible if canDeleteThread is true -->
                <button mat-menu-item aria-label="Delete thread" (click)="removeThread()">
                    <span class="app-thread-delete-btn-label">Delete thread</span>
                </button>
            </mat-menu>
        </div>
    </div>
</div>
