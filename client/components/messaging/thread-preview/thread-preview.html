<!-- thread-preview is displayed within a mat-list-item -->
<div class="app-thread" *ngIf="thread">
    <!-- <user-avatar class="app-thread-header-avatar" [user]="thread.createdBy" [size]="authorAvatarSize"></user-avatar> -->
    <div class="app-thread-header-metadata-title">
        <div class="app-thread-header-metadata-line">
            <span class="app-thread-header-title">{{ thread.title }}</span>
            <span class="app-thread-header-time" matTooltip="{{ (thread.updatedAt || thread.createdAt) | dateAndTime }}" [matTooltipPosition]="tooltipPosition">{{ (thread.updatedAt || thread.createdAt) | date: 'shortTime' }}</span>
        </div>
    </div>
    <div *ngIf="numReplies == 1" class="app-thread-header-metadata">
        {{ numReplies }} reply
    </div>
    <div *ngIf="numReplies > 1" class="app-thread-header-metadata">
            {{ numReplies }} replies
    </div>
    <div class="app-thread-header-metadata-contributor">
        <user-avatar class="app-thread-preview-contributor-avatar" [user]="thread.createdBy" [size]="contributorAvatarSize"></user-avatar>
        <user-avatar class="app-thread-preview-contributor-avatar" *ngFor="let contributor of thread.contributors | slice: 1 | takeRight: 4" [user]="contributor" [size]="contributorAvatarSize"></user-avatar>
    </div>
    <div class="app-thread-header-open-thread">
        <a mat-icon-button (click)="showThread()" matTooltip="Show thread" [matTooltipPosition]="tooltipPosition">
            <mat-icon>open_in_new</mat-icon>
        </a>
    </div>
    <div class="app-thread-header-actions">
        <a mat-icon-button [matMenuTriggerFor]="moreActionsMenu" matTooltip="More actions" [matTooltipPosition]="tooltipPosition" aria-label="More actions">
            <mat-icon aria-label="Icon of three horizontal dots">more_horiz</mat-icon>
        </a>
        <mat-menu #moreActionsMenu="matMenu" xPosition="before" [overlapTrigger]="false">
            <button *ngIf="canDeleteThread" mat-menu-item aria-label="Delete thread" (click)="removeThread()">
                <span class="app-thread-delete-btn-label">Delete thread</span>
            </button>
        </mat-menu>
    </div>
</div>
