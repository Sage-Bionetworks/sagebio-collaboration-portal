<div class="app-message">
    <div class="app-message-header">
        <div class="app-message-header-avatar">
            <picture *ngIf="message.createdBy.picture; else letterAvatar">
                <img class="app-avatar-small" [src]="message.createdBy.picture" aria-label="User picture">
            </picture>
            <ng-template #letterAvatar>
                <avatar class="app-avatar-small" size="50" background="#e87629" [name]="message.createdBy.username" displayType="circle"></avatar>
            </ng-template>
        </div>
        <div class="app-message-header-metadata">
            <span>{{ message.createdBy.username }}</span>
            <span>{{ message.createdAt | date: 'shortTime' }}</span>
        </div>
        <div class="app-message-header-actions">
            <a mat-icon-button matTooltip="Start a thread" [matTooltipPosition]="tooltipPosition" aria-label="Start a thread">
                <mat-icon aria-label="Icon of a chat bubble outline">chat_bubble_outline</mat-icon>
            </a>
            <a mat-icon-button matTooltip="Star message" [matTooltipPosition]="tooltipPosition" aria-label="Star message">
                <mat-icon aria-label="Icon of a star outline">star_outline</mat-icon>
            </a>
            <a mat-icon-button [matMenuTriggerFor]="moreActionsMenu" matTooltip="More actions" [matTooltipPosition]="tooltipPosition" aria-label="More actions">
                <mat-icon aria-label="Icon of three horizontal dots">more_horiz</mat-icon>
            </a>
            <mat-menu #moreActionsMenu="matMenu" xPosition="before" [overlapTrigger]="false">
                <button mat-menu-item aria-label="Edit message" (click)="showMessageEditor()">
                    <span>Edit message</span>
                </button>
                <button mat-menu-item aria-label="Delete message" (click)="deleteMessage()">
                    <span class="app-message-delete-btn-label">Delete message</span>
                </button>
            </mat-menu>
        </div>
    </div>

    <form [formGroup]="form" class="app-message-body">
        <quill-editor class="app-message-ql-editor" #editor [readOnly]="isReadOnly" [modules]="{toolbar: false}" format="json" (keydown.enter)="$event.stopPropagation()" [formControl]="form.controls['editor']">
        </quill-editor>
    </form>

    <!-- <quill-editor format="json" [(ngModel)]="jsonFormat">
    </quill-editor> -->

    <!-- <div *ngIf="!editMessage; else showMessageEditor" class="app-message-body">

    </div>
    <ng-template #showMessageEditor>
        Message editor
    </ng-template> -->
</div>
