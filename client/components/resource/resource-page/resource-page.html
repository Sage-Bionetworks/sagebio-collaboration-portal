<div *ngIf="resource">
    <div class="resource-content">
        <mat-card class="resource-card">
            <div class="resource-card-top">
                <div class="resource-card-left-container">
                    <div class="resource-card-prov-graph-actions">
                        <show-activity-button [root]="resource" (click)="showActivity()"></show-activity-button>
                    </div>
                    <h3>{{ resource.resourceType }} Description</h3>
                    <form [formGroup]="form" novalidate>
                        <app-quill-editor [isReadOnly]="true" saveButtonLabel="Save description" placeholder="Insert text here..." [body]="form.controls['description']" (onSave)="updateDescription()"></app-quill-editor>
                        <mat-error *ngIf="form.controls.description.errors?.jsonStringifyMaxLength">
                            This message must be smaller than {{ form.controls.description.errors.jsonStringifyMaxLength.limit / (2*1024) | number:'1.0-0' }} KB (value:
                            {{ form.controls.description.errors.jsonStringifyMaxLength.value * 2 / 1024 | number:'1.0-0' }} KB)
                        </mat-error>
                        <mat-error *ngIf="errors.updateDescription">
                            {{ errors.updateDescription }}
                        </mat-error>
                    </form>

                    <div class="resource-card-info">
                        <span><b>Created by:</b> {{ resource.createdBy.name }}</span>
                        <span><b>Type:</b> {{ resource.resourceType }}</span>
                        <span *ngIf="resource.resourceType === 'State'"><b>Tool:</b> {{ toolName }}</span>
                    </div>
                </div>
            </div>
            <div class="app-resource-actions">
                <a mat-raised-button routerLink="..">Go Back</a>
                <a *ngIf="resource.resourceType === 'State'" mat-raised-button color="primary" (click)="openInTool(resource)">Open with {{ toolName }}</a>
                <a *ngIf="resource.resourceType !== 'State'" mat-raised-button color="primary" (click)="open(resource)">Open {{ resource.resourceType }}</a>
                <!-- <a mat-raised-button color="primary" (click)="notificationService.info('Not yet implemented')">Discuss</a> -->
                <a mat-raised-button color="primary" [routerLink]="'/discussion'">Discuss</a>
                <a mat-raised-button color="primary" (click)="notificationService.info('Not yet implemented')">Create New Insight</a>
            </div>
        </mat-card>
    </div>
</div>
